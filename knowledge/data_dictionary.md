# Tushare æ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡åº“ (Indicator Cards)

æœ¬æ–‡æ¡£é‡‡ç”¨ **æŒ‡æ ‡å¡ç‰‡ (Indicator Card)** æ ¼å¼ç»„ç»‡ï¼Œæ—¨åœ¨ç¡®ä¿ RAG æ£€ç´¢æ—¶èƒ½åŒæ—¶è·å– **å®šä¹‰**ã€**å­—æ®µ** å’Œ **ç”¨æ³•ç¤ºä¾‹**ã€‚

---

## ğŸ“‚ ä¸€ã€ ä¼°å€¼ä¸åŸºç¡€æŒ‡æ ‡ (Valuation & Basics)

### [æŒ‡æ ‡å¡ç‰‡] å¸‚ç›ˆç‡ (PE / PE-TTM)
#### 1. ä¸šåŠ¡å®šä¹‰
å¸‚ç›ˆç‡ (Price-to-Earnings Ratio)ã€‚
*   **é™æ€å¸‚ç›ˆç‡ (PE)**: åŸºäºä¸Šä¸€å¹´å¹´æŠ¥æ•°æ®ã€‚
*   **æ»šåŠ¨å¸‚ç›ˆç‡ (PE-TTM)**: åŸºäºæœ€è¿‘4ä¸ªå­£åº¦çš„è´¢åŠ¡æ•°æ®ï¼ˆåŠ¨æ€ï¼‰ã€‚**æ¨èä¼˜å…ˆä½¿ç”¨ TTMã€‚**
#### 2. å­—æ®µå (Key)
*   é™æ€: `pe`
*   åŠ¨æ€: `pe_ttm`
#### 3. ä»£ç ç¤ºä¾‹ (Usage) - MUST READ
```python
# è·å–å¸‚ç›ˆç‡æ•°æ®
res = get_daily_basic(trade_date='20251220')
# ç­›é€‰é€»è¾‘éœ€åœ¨ Agent ä»£ç ä¸­å®ç°

```

### [æŒ‡æ ‡å¡ç‰‡] å¸‚å‡€ç‡ (PB)
#### 1. ä¸šåŠ¡å®šä¹‰
å¸‚å‡€ç‡ (Price-to-Book Ratio)ã€‚è‚¡ä»·ä¸æ¯è‚¡å‡€èµ„äº§çš„æ¯”ç‡ã€‚é€‚åˆè¯„ä¼°å‘¨æœŸè‚¡ã€é“¶è¡Œè‚¡ã€‚
#### 2. å­—æ®µå (Key)
`pb`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
res = get_daily_basic(trade_date='20251220')

```

### [æŒ‡æ ‡å¡ç‰‡] è‚¡æ¯ç‡ (Dividend Yield)
#### 1. ä¸šåŠ¡å®šä¹‰
è‚¡æ¯ç‡ã€‚**é«˜é¢‘å‘ç‚¹**ï¼šæ•°å€¼ç›´æ¥è¡¨ç¤ºç™¾åˆ†æ¯”ï¼ˆå¦‚ 3.5 ä»£è¡¨ 3.5%ï¼‰ã€‚
*   **è‚¡æ¯ç‡**: åŸºäºæœ€è¿‘ä¸€æ¬¡åˆ†çº¢ã€‚
*   **æ»šåŠ¨è‚¡æ¯ç‡ (TTM)**: åŸºäºè¿‡å»12ä¸ªæœˆåˆ†çº¢ã€‚
#### 2. å­—æ®µå (Key)
*   é™æ€: `dv_ratio`
*   æ»šåŠ¨: `dv_ttm`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
# è·å–è‚¡æ¯ç‡æ•°æ®
res = get_daily_basic(trade_date='20251220')
# Agent éå†ç­›é€‰ dv_ratio > 5 çš„è‚¡ç¥¨

```

### [æŒ‡æ ‡å¡ç‰‡] å¸‚é”€ç‡ (PS)
#### 1. ä¸šåŠ¡å®šä¹‰
å¸‚é”€ç‡ (Price-to-Sales)ã€‚é€‚åˆè¯„ä¼°é«˜å¢é•¿ä½†ä¹ŸäºæŸçš„å…¬å¸ã€‚
#### 2. å­—æ®µå (Key)
*   é™æ€: `ps`
*   æ»šåŠ¨: `ps_ttm`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
res = get_daily_basic(trade_date='20251220')

```

### [æŒ‡æ ‡å¡ç‰‡] å¸‚å€¼ (Market Cap)
#### 1. ä¸šåŠ¡å®šä¹‰
*   **æ€»å¸‚å€¼**: æ€»è‚¡æœ¬ * è‚¡ä»·ã€‚å•ä½ï¼š**ä¸‡å…ƒ**ã€‚
*   **æµé€šå¸‚å€¼**: æµé€šè‚¡æœ¬ * è‚¡ä»·ã€‚å•ä½ï¼š**ä¸‡å…ƒ**ã€‚
#### 2. å­—æ®µå (Key)
*   æ€»å¸‚å€¼: `total_mv`
*   æµé€šå¸‚å€¼: `circ_mv`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
res = get_daily_basic(trade_date='20251220')
# data = res['data']...

```

### [æŒ‡æ ‡å¡ç‰‡] æ¢æ‰‹ç‡ (Turnover Rate)
#### 1. ä¸šåŠ¡å®šä¹‰
è‚¡ç¥¨è½¬æ‰‹ä¹°å–çš„é¢‘ç‡ã€‚æƒ…ç»ªæŒ‡æ ‡ã€‚å•ä½ï¼š%ã€‚
#### 2. å­—æ®µå (Key)
`turnover_rate`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
res = get_daily_basic(trade_date='20251220')

```

### [æŒ‡æ ‡å¡ç‰‡] é‡æ¯” (Volume Ratio)
#### 1. ä¸šåŠ¡å®šä¹‰
é‡èƒ½æŒ‡æ ‡ã€‚å¼€ç›˜åå¹³å‡æ¯åˆ†é’Ÿæˆäº¤é‡ä¸è¿‡å»5å¤©å¹³å‡å€¼çš„æ¯”å€¼ã€‚
#### 2. å­—æ®µå (Key)
`volume_ratio`

---

## ğŸ“‚ äºŒã€ å¸‚åœºè¡Œæƒ…æ•°æ® (Market Data)

### [æŒ‡æ ‡å¡ç‰‡] é‡ä»·æ•°æ® (OHLCV)
#### 1. ä¸šåŠ¡å®šä¹‰
åŸºç¡€è¡Œæƒ…æ•°æ® (Daily)ã€‚
*   **æˆäº¤é‡ (Vol)**: å•ä½æ˜¯ **æ‰‹** (100è‚¡)ã€‚
*   **æˆäº¤é¢ (Amount)**: å•ä½æ˜¯ **åƒå…ƒ**ã€‚
#### 2. å­—æ®µå (Key)
*   æ”¶ç›˜: `close`
*   å¼€ç›˜: `open`
*   é«˜: `high`
*   ä½: `low`
*   é‡: `vol`
*   é¢: `amount`
*   æ¶¨è·Œå¹…: `pct_chg` (%)
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
df = pro.daily(ts_code='000001.SZ')
close_price = df['close']
volume = df['vol'] * 100 # æ¢ç®—æˆè‚¡
amount = df['amount'] * 1000 # æ¢ç®—æˆå…ƒ
```

---

## ğŸ“‚ ä¸‰ã€ è´¢åŠ¡èƒ½åŠ› (Financials)

### [æŒ‡æ ‡å¡ç‰‡] ç›ˆåˆ©èƒ½åŠ› (ROE/Margins)
#### 1. ä¸šåŠ¡å®šä¹‰
*   **ROE**: å‡€èµ„äº§æ”¶ç›Šç‡ (%)
*   **æ¯›åˆ©ç‡**: Gross Margin (%)
*   **å‡€åˆ©ç‡**: Net Profit Margin (%)
#### 2. å­—æ®µå (Key)
*   ROE: `roe`
*   æ¯›åˆ©ç‡: `gross_margin`
*   å‡€åˆ©ç‡: `netprofit_margin`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
# æ–¹æ³• A: è·å–å…¨å¸‚åœºæŸå­£åº¦çš„ç›ˆåˆ©èƒ½åŠ› (ç”¨äºé€‰è‚¡)
res = get_financial_indicator(period='20240930')

# æ–¹æ³• B: è·å–ç‰¹å®šè‚¡ç¥¨çš„å†å²ç›ˆåˆ©èƒ½åŠ› (ç”¨äºæœé‚¦åˆ†æ)
res = get_stock_financials(stock_code='600519.SH', limit=8)
```

### [æŒ‡æ ‡å¡ç‰‡] æœé‚¦åˆ†ææ ¸å¿ƒ (DuPont Components)
#### 1. ä¸šåŠ¡å®šä¹‰
å°† ROE æ‹†è§£ä¸ºä¸‰éƒ¨åˆ†ï¼š
*   **ç›ˆåˆ©èƒ½åŠ›**: é”€å”®å‡€åˆ©ç‡ (`netprofit_margin`)
*   **è¥è¿èƒ½åŠ›**: æ€»èµ„äº§å‘¨è½¬ç‡ (`assets_turnover`)
*   **è´¢åŠ¡æ æ†**: æƒç›Šä¹˜æ•° (`equity_multiplier`)
*   **å…¬å¼**: $ROE = å‡€åˆ©ç‡ \times å‘¨è½¬ç‡ \times æƒç›Šä¹˜æ•°$
#### 2. å·¥å…· (Tool)
`get_stock_financials(stock_code='...', limit=8)`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
# è·å–å†å² 8 ä¸ªå­£åº¦çš„æœé‚¦æŒ‡æ ‡
res = get_stock_financials(stock_code='000001.SZ', limit=8)
# data = res['data'] -> éå†å¹¶è®¡ç®— ROE è¶‹åŠ¿å’Œæ‹†è§£é¡¹
```

### [æŒ‡æ ‡å¡ç‰‡] åˆ©æ¶¦è¡¨æ ¸å¿ƒ (Revenue/Profit TTM)
#### 1. ä¸šåŠ¡å®šä¹‰
*   **æ€»è¥æ”¶**: Total Revenue TTM (æ»šåŠ¨, å…ƒ)
*   **å‡€åˆ©æ¶¦**: Net Profit TTM (å½’æ¯æ»šåŠ¨, å…ƒ)
*   **æ³¨æ„**: è¿™äº›å­—æ®µç”±å¸‚å€¼ (MV) é™¤ä»¥ å¸‚é”€ç‡(PS)/å¸‚ç›ˆç‡(PE) æ¨å¯¼å¾—å‡ºï¼Œæä¾›**è¿‡å»12ä¸ªæœˆ (TTM)** çš„ç´¯è®¡å€¼ã€‚
#### 2. å­—æ®µå (Key)
*   è¥æ”¶: `total_revenue_ttm`
*   å‡€åˆ©: `net_profit_ttm`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
# è·å–è¥æ”¶å’Œå‡€åˆ©æ¶¦æ•°æ® (æ— éœ€è°ƒç”¨ get_income_statement)
res = get_daily_basic(trade_date='20251220')
# data = res['data']
# revenue = item['total_revenue_ttm']
```

---

## ğŸ“‚ å››ã€ é€šç”¨æ ‡è¯† (Identity)

### [æŒ‡æ ‡å¡ç‰‡] è‚¡ç¥¨ä»£ç  (TS Code)
#### 1. å®šä¹‰
Tushare æ ‡å‡†ä»£ç æ ¼å¼ï¼Œå¦‚ `000001.SZ`, `600519.SH`ã€‚
#### 2. å­—æ®µå (Key)
`ts_code`
#### 3. æ³¨æ„äº‹é¡¹
Agent è¯·ä¼˜å…ˆä½¿ç”¨ `ts_code` ä½œä¸ºä¸»é”®ã€‚ä½†åœ¨ Tool å†…éƒ¨å·²åšäº† `code` æ˜ å°„ã€‚

---

## ğŸ“‚ äº”ã€ æ¦‚å¿µä¸æ¿å— (Concepts & Blocks)

### [æŒ‡æ ‡å¡ç‰‡] æ¦‚å¿µåˆ—è¡¨ (Concept List)
#### 1. ä¸šåŠ¡å®šä¹‰
è·å–å¸‚åœºæ¦‚å¿µæˆ–è¡Œä¸šåˆ—è¡¨ã€‚
*   **Tushareæ¦‚å¿µ**: `src='ts'` (é»˜è®¤)
*   **åŒèŠ±é¡ºæ¦‚å¿µ**: `src='ths'`
#### 2. å·¥å…· (Tool)
`get_concepts(src='ts')`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
# è·å–æ‰€æœ‰æ¦‚å¿µ
concepts = get_concepts(src='ts')
# æŸ¥æ‰¾åŠå¯¼ä½“ç›¸å…³æ¦‚å¿µ
semicon_concepts = [c for c in concepts if 'åŠå¯¼ä½“' in c['name']]
```

### [æŒ‡æ ‡å¡ç‰‡] æ¦‚å¿µæˆåˆ†è‚¡ (Concept Stocks)
#### 1. ä¸šåŠ¡å®šä¹‰
è·å–å±äºç‰¹å®šæ¦‚å¿µ/è¡Œä¸šçš„æ‰€æœ‰è‚¡ç¥¨ã€‚
#### 2. å·¥å…· (Tool)
`get_concept_stocks(id='...')`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
# id å¿…é¡»æ˜¯ get_concepts è¿”å›çš„ code
stocks = get_concept_stocks(id='TS123')
```

---

## ğŸ“‚ å…­ã€ å…¨å¸‚åœºç­›é€‰ (Market Screener)

### [æŒ‡æ ‡å¡ç‰‡] æ¯æ—¥å…¨å¸‚åœºè¡Œæƒ… (Market Daily)
#### 1. ä¸šåŠ¡å®šä¹‰
**é€‰è‚¡å™¨ (Screener) æ ¸å¿ƒå·¥å…·**ã€‚ä¸€æ¬¡æ€§è·å–æŸæ—¥**å…¨å¸‚åœº**æ‰€æœ‰è‚¡ç¥¨çš„è¡Œæƒ…ã€‚
*   **ç”¨é€”**: æŸ¥æ‰¾æ¶¨åœè‚¡ã€è·Œåœè‚¡ã€æ”¾é‡è‚¡ç­‰ã€‚
*   **æ³¨æ„**: æ¯æ—¥æ•°æ®é€šå¸¸åœ¨ **17:00** åæ›´æ–°ã€‚å¦‚éœ€ç›˜ä¸­æ•°æ®æˆ–æœ€æ–°æ•°æ®ï¼Œè¯·ä¼˜å…ˆä½¿ç”¨ **ä¸Šä¸€äº¤æ˜“æ—¥ (Yesterday)**ã€‚
#### 2. å·¥å…· (Tool)
`get_market_daily(trade_date='YYYYMMDD')`
#### 3. å¸¸è§ä¸šåŠ¡é€»è¾‘ (Business Rules)
*   **æ¶¨è·Œåœåˆ¤æ–­ (Limit Up/Down)**:
    *   **ä¸»æ¿ (Main Board)**: æ¶¨è·Œå¹…é™åˆ¶ $\pm 10\%$ (`pct_chg > 9.8` æˆ– `pct_chg < -9.8`)
    *   **åˆ›ä¸šæ¿/ç§‘åˆ›æ¿ (ChiNext/STAR)**: æ¶¨è·Œå¹…é™åˆ¶ $\pm 20\%$ (`pct_chg > 19.8` æˆ– `pct_chg < -19.8`, ä»£ç  `300`/`688` å¼€å¤´)
    *   **STè‚¡**: æ¶¨è·Œå¹…é™åˆ¶ $\pm 5\%$
    *   **Agent æ€è€ƒ**: è‹¥éœ€æŸ¥è¯¢â€œæ¶¨åœè‚¡â€ï¼Œè¯·è·å–å…¨å¸‚åœºæ•°æ®åï¼Œç¼–å†™ Python ä»£ç æ ¹æ®ä¸Šè¿°è§„åˆ™ç­›é€‰ `pct_chg`ã€‚
#### 4. ä»£ç ç¤ºä¾‹ (Usage)
```python
# è·å–æŸæ—¥å…¨å¸‚åœºè¡Œæƒ…
res = get_market_daily(trade_date='20251220')
if res['status'] == 'success':
    df = pd.DataFrame(res['data'])
    # Agent éœ€è‡ªè¡Œæ ¹æ®ä¸šåŠ¡è§„åˆ™ç¼–å†™ç­›é€‰é€»è¾‘
```

---

## ğŸ“‚ ä¸ƒã€ æ·±åº¦åˆ†æè¾…åŠ© (Deep Analysis)

### [æŒ‡æ ‡å¡ç‰‡] ä¼°å€¼åˆ†ä½ (Valuation Percentile)
#### 1. ä¸šåŠ¡å®šä¹‰
è®¡ç®—å½“å‰ PE/PB åœ¨è¿‡å»ä¸€æ®µæ—¶é—´ï¼ˆå¦‚ 3 å¹´ï¼‰çš„ç™¾åˆ†ä½ä½ç½®ã€‚
*   **ä½ä½ (< 20%)**: ä½ä¼°ã€‚
*   **ä¸­ä½ (20% - 80%)**: åˆç†ã€‚
*   **é«˜ä½ (> 80%)**: é«˜ä¼°ã€‚
#### 2. å·¥å…· (Tool)
`get_valuation_history(stock_code='...', start_date='...', end_date='...')`
#### 3. ä»£ç ç¤ºä¾‹ (Usage)
```python
# è·å–è¿‡å» 3 å¹´ä¼°å€¼å†å² (å‡è®¾å½“å‰ 20251220)
res = get_valuation_history(stock_code='600519.SH', start_date='20221220', end_date='20251220')
# è®¡ç®— pe_ttm çš„åˆ†ä½æ•°: (df['pe_ttm'] < current_pe).mean()
```
